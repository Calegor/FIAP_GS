const mapeamento = {
  "analista de rh": [
    {
      nome: "Análise de Dados (People Analytics)",
      descricao:
        "Essencial para prever tendências, garantir recrutamento ético e apoiar decisões.",
      link: "#",
    },
    {
      nome: "Gestão Híbrida de Equipes",
      descricao:
        "Adapte-se aos novos padrões de flexibilidade, que tendem a se consolidar.",
      link: "#",
    },
    {
      nome: "Empatia e Colaboração",
      descricao:
        "Competências humanas valorizadas para tornar o mundo mais inclusivo e justo.",
      link: "#",
    },
  ],
  "atendente comercial": [
    {
      nome: "IA como Parceira (Bots)",
      descricao:
        "Uso de agentes de IA para otimizar o dia a dia, aumentando a capacidade humana.",
      link: "#",
    },
    {
      nome: "Comunicação em Ambientes Imersivos",
      descricao:
        "Prepare-se para ambientes de trabalho em Realidade Virtual/Aumentada.",
      link: "#",
    },
    {
      nome: "Reskilling e Adaptação",
      descricao:
        "A requalificação contínua é central para se manter relevante no mercado.",
      link: "#",
    },
  ],
  motorista: [
    {
      nome: "Logística Automatizada e Análise de Risco",
      descricao: "Entender o impacto da robótica e automação nos transportes.",
      link: "#",
    },
    {
      nome: "Economia Verde e Sustentabilidade",
      descricao: "Novos modelos de trabalho alinhados aos ODS.",
      link: "#",
    },
    {
      nome: "Comunidades de Aprendizagem Colaborativa",
      descricao: "Aproveite redes de colaboração para formação e upskilling.",
      link: "#",
    },
  ],
  professor: [
    {
      nome: `Plataformas de Aprendizagem Adaptativa`,
      descricao: `A tecnologia pode personalizar <span class="glossario-termo" data-tooltip="Caminhos de estudo individualizados, ajustados ao ritmo e nível de conhecimento de cada aluno.">jornadas de aprendizagem</span>, criando experiências imersivas.`,
      link: "#",
    },
    {
      nome: `Design de Experiências Imersivas`,
      descricao: `Uso de <span class="glossario-termo" data-tooltip="Ambientes virtuais ou de realidade aumentada que simulam cenários reais para treinamento e colaboração.">ambientes híbridos e imersivos</span> para novas formas de aprendizagem.`,
      link: "#",
    },
    {
      nome: `Criatividade e Colaboração`,
      descricao: `Desenvolver novas formas de <span class="glossario-termo" data-tooltip="Garantir que todos os grupos sociais, especialmente os mais vulneráveis, tenham acesso a oportunidades de trabalho e renda.">inclusão produtiva</span> e comunidades de aprendizagem colaborativa e global.`,
      link: "#",
    },
  ],
  contador: [
    {
      nome: `Automação Robótica de Processos (<span class="glossario-termo" data-tooltip="Robotic Process Automation: Software que imita ações humanas para automatizar tarefas repetitivas e rotineiras.">RPA</span>)`,
      descricao: `Automatização de tarefas repetitivas, permitindo focar em análise estratégica e consultoria.`,
      link: "#",
    },
    {
      nome: `Análise Preditiva de Dados (<span class="glossario-termo" data-tooltip="Grandes volumes de dados que exigem ferramentas avançadas para serem processados e transformados em insights.">Big Data</span>)`,
      descricao: `Transformar grandes volumes de dados em insights para tomada de decisões.`,
      link: "#",
    },
    {
      nome: `Pensamento Crítico e Ética`,
      descricao: `Aplicar julgamento humano onde a <span class="glossario-termo" data-tooltip="Inteligência Artificial: Sistemas que simulam a inteligência humana para realizar tarefas, como aprender e tomar decisões.">IA</span> não alcança, mantendo a credibilidade.`,
      link: "#",
    },
  ],
  "gerente de loja": [
    {
      nome: `Experiência de Cliente (<span class="glossario-termo" data-tooltip="Customer Experience: Conjunto de percepções e interações que um cliente tem com uma marca ou produto.">CX</span>) Digital`,
      descricao: `Adaptar o negócio para o modelo digital e gerenciar ambientes híbridos de venda.`,
      link: "#",
    },
    {
      nome: `Gestão de Ambientes Híbridos`,
      descricao: `Criar soluções que garantam <span class="glossario-termo" data-tooltip="Modelos que combinam trabalho remoto e presencial, exigindo flexibilidade e nova cultura organizacional.">ambientes flexíveis</span> e desenvolvimento contínuo em ambientes flexíveis.`,
      link: "#",
    },
    {
      nome: `Recrutamento Ético e Inclusivo`,
      descricao: `Garantir que a transição não exacerbe <span class="glossario-termo" data-tooltip="Diferenças e disparidades sociais, econômicas e de oportunidades entre grupos de pessoas.">desigualdades</span> na força de trabalho.`,
      link: "#",
    },
  ],
  jornalista: [
    {
      nome: `Bots e Agentes de <span class="glossario-termo" data-tooltip="Inteligência Artificial: Sistemas que simulam a inteligência humana para realizar tarefas, como aprender e tomar decisões.">IA</span> para Triagem de Fatos`,
      descricao: `Uso de IA como parceira para otimizar a pesquisa e análise de grandes volumes de informações.`,
      link: "#",
    },
    {
      nome: `Narrativa em Ambientes Imersivos`,
      descricao: `Explorar novas mídias e <span class="glossario-termo" data-tooltip="Tecnologias como Realidade Virtual ou Aumentada que criam experiências de trabalho e comunicação simuladas.">ambientes imersivos</span> em realidade virtual ou aumentada.`,
      link: "#",
    },
    {
      nome: `Pensamento Crítico e Ética`,
      descricao: `Lidar com dilemas de dignidade e assegurar que as máquinas <span class="glossario-termo" data-tooltip="Tornar o trabalho humano mais eficiente e estratégico, delegando tarefas repetitivas à tecnologia.">aumentem a capacidade humana</span>.`,
      link: "#",
    },
  ],
  "operador de maquina": [
    {
      nome: `Manutenção Preditiva (<span class="glossario-termo" data-tooltip="Internet of Things: Redes de dispositivos físicos interconectados que coletam e trocam dados.">IoT</span>)`,
      descricao: `Uso de tecnologia e análise de dados para prever falhas e otimizar processos (automação e robótica).`,
      link: "#",
    },
    {
      nome: `Economia Verde e Sustentabilidade`,
      descricao: `Requalificação para <span class="glossario-termo" data-tooltip="Mudança de setores da economia para práticas que reduzem o impacto ambiental e promovem o uso eficiente de recursos.">transições verdes</span> e modelos de trabalho baseados em impacto social.`,
      link: "#",
    },
    {
      nome: `Reskilling e Adaptação Ágil`,
      descricao: `Adaptação constante a novas ferramentas e <span class="glossario-termo" data-tooltip="Ação de adquirir novas competências e conhecimentos para um novo emprego ou função.">Reskilling</span> em profissões que ainda não existem.`,
      link: "#",
    },
  ],
  enfermeiro: [
    {
      nome: `Monitoramento de Bem-Estar e Saúde Mental`,
      descricao: `Ferramentas para monitoramento da saúde em ambientes de trabalho (<span class="glossario-termo" data-tooltip="Área de estudo que usa tecnologia e dados para melhorar a saúde, o bem-estar e o desempenho dos colaboradores.">saúde e bem-estar no trabalho</span>).`,
      link: "#",
    },
    {
      nome: `Telemedicina e Ambientes Imersivos`,
      descricao: `Uso de realidade virtual ou aumentada e plataformas de colaboração global para atendimento.`,
      link: "#",
    },
    {
      nome: `Empatia e Cuidado Humano`,
      descricao: `Competências que se tornam mais valorizadas, focando na dimensão humana do trabalho.`,
      link: "#",
    },
  ],
  advogado: [
    {
      nome: `Regulação de <span class="glossario-termo" data-tooltip="Inteligência Artificial: Sistemas que simulam a inteligência humana para realizar tarefas, como aprender e tomar decisões.">IA</span> e Automação`,
      descricao: `Criação de instrumentos legais para coibir a exclusão e proteger o trabalhador frente à IA.`,
      link: "#",
    },
    {
      nome: `Fortalecimento da Proteção Social`,
      descricao: `Adaptação de redes de proteção social e <span class="glossario-termo" data-tooltip="Processo de modernização das leis de trabalho para se adequarem a novos modelos de emprego, como o trabalho por plataforma.">regulação trabalhista</span> aos novos modelos de emprego (ex.: trabalho por plataforma).`,
      link: "#",
    },
    {
      nome: `Análise de Dados Jurídicos e Ética`,
      descricao: `Análise de dados para prever tendências e garantir o uso ético das novas tecnologias.`,
      link: "#",
    },
  ],
};

// função para mostrar/esconder o campo de texto "outros"
function toggleOutros() {
  const selecao = document.getElementById("profissao-selecao");
  const containerOutros = document.getElementById("outras-profissao-container");
  const inputOutros = document.getElementById("outras-profissao");

  if (!selecao || !containerOutros || !inputOutros) return;

  if (selecao.value === "outros") {
    containerOutros.style.display = "block"; // mostra o container
  } else {
    containerOutros.style.display = "none"; // esconde o container
    inputOutros.value = ""; // limpa o input
  }

  const resultadoDiv = document.getElementById("resultado");
  const erroDiv = document.getElementById("erro-mensagem");
  if (resultadoDiv) resultadoDiv.style.display = "none";
  if (erroDiv) erroDiv.style.display = "none";
}

function mapearHabilidades() {
  const selecao = document.getElementById("profissao-selecao");
  const outrasProfissaoInput = document.getElementById("outras-profissao");
  const resultadoDiv = document.getElementById("resultado");
  const erroDiv = document.getElementById("erro-mensagem");
  // o elemento cta-mapa será mostrado após a exibição do resultado
  const chamadaMapa = document.getElementById("chamada-mapa");

  if (!selecao || !resultadoDiv || !erroDiv || !chamadaMapa) return;

  resultadoDiv.style.display = "none";
  erroDiv.style.display = "none";
  chamadaMapa.style.display = "none";

  let htmlResultado = "";
  let profissaoChave = "";

  if (selecao.value === "") {
    erroDiv.innerHTML = "Por favor, selecione uma opção ou 'Outros'.";
    erroDiv.style.display = "block";
    return;
  } else if (selecao.value !== "outros") {
    profissaoChave = selecao.value;
  } else {
    if (!outrasProfissaoInput || outrasProfissaoInput.value.trim() === "") {
      erroDiv.innerHTML =
        "Você selecionou 'Outros'. Por favor, digite sua profissão no campo abaixo.";
      erroDiv.style.display = "block";
      return;
    }
    profissaoChave = "outros_nao_mapeado";
  }

  if (mapeamento[profissaoChave]) {
    const habilidades = mapeamento[profissaoChave];

    /* a mensagem introdutória adaptada para o H2 + p para manter o estilo visual desejado. */

    // conteúdo da introdução (não é um item de habilidade)
    htmlResultado += `<p style="text-align: left; margin-top: -5px; margin-bottom: 25px;">
                      Com base na sua área, recomendamos que você se concentre nas seguintes <i>competências do futuro</i>:
                      </p>`;

    habilidades.forEach((h) => {
      // usando a classe .proposito-item para aplicar o estilo de lista e separadores
      htmlResultado += `
            <div class="proposito-item">
              <strong>${h.nome}</strong>
              <p>${h.descricao}</p>
              <a href="${h.link}">Acessar Artigo/Curso</a>
            </div>
          `;
    });
  } else {
    // caso a profissão não seja mapeada
    htmlResultado = `
          <p>
            Ainda estamos construindo o mapeamento específico para essa área! Isso mostra que a transição está em curso.
          </p>
          <p>
            Para qualquer carreira, as competências humanas são cruciais. Recomendamos focar em:
          </p>
          <!-- Usando a classe .proposito-item para aplicar o estilo de lista e separadores -->
          <div class="proposito-item">
            <strong>Criatividade e Pensamento Crítico</strong>
            <p>Habilidades essenciais para lidar com os desafios inéditos e reimaginar o trabalho.</p>
            <a href="https://sebrae.com.br/Sebrae/Portal%20Sebrae/UFs/PE/Anexos/Guia-das-soft-skills-saiba-tudo-sobre-essas-habilidades.pdf" target="_blank" style="text-align: center;">Entenda soft skills</a>
          </div>
        `;
  }

  // define o HTML final, usando a classe de título que você deve estilizar
  resultadoDiv.innerHTML =
    '<h2 class="resultado-titulo">Seu caminho de requalificação</h2>' +
    htmlResultado;
  resultadoDiv.style.display = "block";

  // mostra a chamada à ação após o mapeamento
  chamadaMapa.style.display = "block";
}
